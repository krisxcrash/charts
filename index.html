<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Charts.js Practice</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js">
	</script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
</head>
<body>
    
    <canvas id="myChart"></canvas>

<script>

var queryURL = "http://localhost:8080/test.json";
$.ajax( {
		url: queryURL,
		method: "GET"
	} )
	.done( function( response ) {
		var results = response.data;
		for ( let i = 0; i < results.length; i++ ) {
			var timeStamp = results[ i ].Timestamp;
			var open = results[ i ].Open;
			var high = results[ i ].High;
			var low = results[ i ].Low;
			var close = results[ i ].Close;
			var btcVolume = results[ i ].VolumeBTC;
			var currencyVolume = results[ i ].VolumeCurrency;
			var weightedPrice = results[ i ].WeightedPrice;
			// console.log(btcVolume);
			var ctx = document.getElementById( 'myChart' )
				.getContext( '2d' );
			var chart = new Chart( ctx, {
				// The type of chart
				type: 'bar',
				// The data for the dataset
				data: {
					datasets: [ {
						label: "Weighted Price",
						backgroundColor: 'rgba(255, 99, 132, .5)',
						borderColor: 'rgba(255, 99, 132, .8)',
						data: [ weightedPrice ], //this shows the weighted price but only in one column, not as an array
					} ],
                    labels: [ btcVolume ], //I would like this to display the different volumes
                    
                    //the ajax call is taking a long time to return the data - is there a way to improve speed? will that be corrected with the SQL data?
				},
				// Configuration options go here
				options: {}
			} );
		}
    } )
    

	//  Charting
	//     var ctx = document.getElementById('myChart').getContext('2d');
	//     var chart = new Chart(ctx, {
	//     // The type of chart we want to create
	//     type: 'bar',
	//     // The data for our dataset
	//     data: {
	//             datasets: [{
	//                 label: "Weighted Price",
	//                 backgroundColor: 'rgba(255, 99, 132, .5)',
	//                 borderColor: 'rgba(255, 99, 132, .8)',
	//                 data: [0, 10, 5, 2, 20, 30, 45],
	//             },
	//             {
	//                 label: 'Dataset 2',
	//                 backgroundColor: 'rgba(76, 162, 255, .5)',
	//                 borderColor: 'rgba(76, 162, 255, .9)',
	//                 data: [24, 36, 12, 10, 10, 42, 12],
	//                 type: 'line'
	//             }, {
	//                 label: 'Dataset 3',
	//                 backgroundColor: 'rgba(162, 255, 76, .8)',
	//                 borderColor: 'rgba(162, 255, 76, .9)',
	//                 data: [36, 18, 10, 25, 31, 44, 18],
	//                 type: 'bubble'
	//             },
	//             {
	//                 label: 'Dataset 4',
	//                 backgroundColor: 'rgba(168, 12, 252, .0)',
	//                 borderColor: 'rgba(168, 12, 252, .9)',
	//                 data: [45, 12, 34, 10, 36, 40, 43],
	//                 type: 'line'
	//             }],
	//         labels: ["0", "10000", "20000", "30000", "40000", "50000", "60000"],
	//     },
	//     // Configuration options go here
	//     options: {}
	// });
    </script>


</body>
</html>